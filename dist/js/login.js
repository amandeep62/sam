"use strict";define(["jquery","cookie","keycloak","endPoint","app","appActions"],function(e,o,n,l,c,a){var r={loggedInUserInfo:{name:null,userName:null,email:null,token:null}};r.keycloakConfig=l.keycloakConfig(),r.keycloak=n(r.keycloakConfig);return e(".container").on("click","#log-out",function(){"localhost"===window.location.hostname?(o.remove("existingToken"),location.reload()):a.disconnect("logout",function(e){"complete"===e&&r.keycloak.logout()})}),{start:function(o){r.keycloak.init({onLoad:"login-required"}).success(function(e){e&&r.keycloak.loadUserInfo().success(function(e){r.loggedInUserInfo.name=e.name,r.loggedInUserInfo.userName=e.preferred_username,r.loggedInUserInfo.email=e.email,r.loggedInUserInfo.token=r.keycloak.token,r.loggedInUserInfo.devRole=function(){for(var e=0;e<r.keycloak.realmAccess.roles.length;e++)if("ROLE_DEVELOPER"===r.keycloak.realmAccess.roles[e])return!0}(),o(r.loggedInUserInfo)}).error(function(){alert("unable to load userInfo")})})}}});